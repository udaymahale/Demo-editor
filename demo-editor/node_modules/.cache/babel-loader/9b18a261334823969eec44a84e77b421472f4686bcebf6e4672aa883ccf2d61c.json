{"ast":null,"code":"/*\n* draft.js - A lightweight library for parametric design\n* version v0.2.0\n* http://draft.D1SC0te.ch\n*\n* copyright Jordi Pakey-Rodriguez <jordi.orlando@hexa.io>\n* license MIT\n*\n* BUILT: Fri Feb 05 2016 10:46:44 GMT-0600 (CST)\n*/\n;\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.draft = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var _createClass = function () {\n    function defineProperties(target, props) {\n      for (var i = 0; i < props.length; i++) {\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n      }\n    }\n    return function (Constructor, protoProps, staticProps) {\n      if (protoProps) defineProperties(Constructor.prototype, protoProps);\n      if (staticProps) defineProperties(Constructor, staticProps);\n      return Constructor;\n    };\n  }();\n  var _slicedToArray = function () {\n    function sliceIterator(arr, i) {\n      var _arr = [];\n      var _n = true;\n      var _d = false;\n      var _e = undefined;\n      try {\n        for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n          _arr.push(_s.value);\n          if (i && _arr.length === i) break;\n        }\n      } catch (err) {\n        _d = true;\n        _e = err;\n      } finally {\n        try {\n          if (!_n && _i[\"return\"]) _i[\"return\"]();\n        } finally {\n          if (_d) throw _e;\n        }\n      }\n      return _arr;\n    }\n    return function (arr, i) {\n      if (Array.isArray(arr)) {\n        return arr;\n      } else if (Symbol.iterator in Object(arr)) {\n        return sliceIterator(arr, i);\n      } else {\n        throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n      }\n    };\n  }();\n  function _possibleConstructorReturn(self, call) {\n    if (!self) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n    return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n  }\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n    }\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _typeof(obj) {\n    return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj;\n  }\n  var draft = function draft(name) {\n    return draft.doc(name);\n  };\n\n  // Initialize types and mixins\n  draft.types = {};\n  draft.mixins = {};\n\n  // TODO: prefer operators at beginning of lines?\n\n  // These methods are adapted from Oliver Caldwell's Heir script, which he has\n  // released under the Unlicense (public domain).\n  // GitHub Repository: https://github.com/Olical/Heir\n\n  draft.inherit = function inherit(destination, source, addSuper) {\n    var proto = destination.prototype = Object.create(source.prototype);\n    proto.constructor = destination;\n    if (addSuper || typeof addSuper === 'undefined') {\n      destination._super = source.prototype;\n    }\n  };\n  draft.mixin = function mixin(destination, source) {\n    for (var key in source) {\n      if (source.hasOwnProperty(key)) {\n        destination.prototype[key] = source[key];\n      }\n    }\n  };\n  draft.proxy = function proxy(obj) {\n    var setInit = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n    var access = function access(target, prop, init) {\n      if (typeof prop === 'string') {\n        return access(target, prop.split('.'), init);\n      }\n      var p = prop.shift();\n      if (prop.length && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && (init || p in target)) {\n        // TODO: when init is false, setting obj['foo.bar'] will incorrectly set\n        // obj['foo'] instead\n        return access(p in target ? target[p] : target[p] = {}, prop, init);\n      }\n      return [target, p];\n    };\n\n    // TODO: return null if the property does not exist or was not set/deleted?\n    var handler = {\n      has: function has(target, prop) {\n        var _access = access(target, prop);\n        var _access2 = _slicedToArray(_access, 2);\n        var t = _access2[0];\n        var p = _access2[1];\n        return !!t[p];\n      },\n      get: function get(target, prop) {\n        var _access3 = access(target, prop);\n        var _access4 = _slicedToArray(_access3, 2);\n        var t = _access4[0];\n        var p = _access4[1];\n        return t[p];\n      },\n      set: function set(target, prop, val) {\n        var _access5 = access(target, prop, setInit);\n        var _access6 = _slicedToArray(_access5, 2);\n        var t = _access6[0];\n        var p = _access6[1];\n        t[p] = val;\n        return true;\n      },\n      deleteProperty: function deleteProperty(target, prop) {\n        var _access7 = access(target, prop);\n        var _access8 = _slicedToArray(_access7, 2);\n        var t = _access8[0];\n        var p = _access8[1];\n        return delete t[p];\n      }\n    };\n\n    // BACKLOG: wait for browser support for ES6 proxies\n    return typeof Proxy === 'function' ? new Proxy(obj, handler) : obj;\n  };\n\n  // TODO: configurable defaults\n  draft.defaults = draft.proxy({\n    get dpi() {\n      var test = document.createElement('div');\n      test.style.width = '1in';\n      test.style.padding = 0;\n      document.getElementsByTagName('body')[0].appendChild(test);\n      var dpi = test.offsetWidth;\n      document.getElementsByTagName('body')[0].removeChild(test);\n\n      // Fall back to standard 96dpi resolution\n      return dpi || 96;\n    }\n  });\n  draft.types.Float = function () {\n    function Float(value) {\n      _classCallCheck(this, Float);\n      this.value = parseFloat(value);\n    }\n    _createClass(Float, [{\n      key: 'valueOf',\n      value: function valueOf() {\n        return this.value;\n      }\n    }, {\n      key: 'type',\n      get: function get() {\n        return 'float';\n      }\n    }, {\n      key: 'regex',\n      get: function get() {\n        // Matches all floating point values. Should match:\n        // 123\n        // -123.45\n        // 123e5\n        // 123.45E+5\n        return '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?';\n      }\n    }]);\n    return Float;\n  }();\n  draft.types.float = function float(value) {\n    return value == undefined ? value : new draft.types.Float(value);\n  };\n  var test = function test(val, regex) {\n    // TODO: strict match anchor (^ instead of word end)\n    regex = new RegExp(regex + '$', 'i');\n    val = regex.exec(val);\n    return val ? val[0].toLowerCase() : false;\n  };\n  draft.types.Length = function (_draft$types$Float) {\n    _inherits(Length, _draft$types$Float);\n    function Length(value, unit) {\n      _classCallCheck(this, Length);\n      var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Length).call(this, value));\n      value = test(value, _this.regex);\n      unit = test(unit, _this.regex);\n      if (!isNaN(_this.value) && (value || unit)) {\n        _this.unit = value || unit;\n        _this.convert(unit);\n      } else {\n        _this.unit = '';\n      }\n      return _this;\n    }\n    _createClass(Length, [{\n      key: 'convert',\n      value: function convert(newUnit) {\n        var _this2 = this;\n        newUnit = test(newUnit, this.regex);\n        if (!newUnit) {\n          return false;\n        }\n        var chain = function chain(unit, reverse) {\n          var units = _this2.units[unit];\n          _this2.value *= reverse ? units[1] : units[0];\n          _this2.value /= reverse ? units[0] : units[1];\n          return units[2];\n        };\n        var unit = this.unit;\n        while (unit !== newUnit && unit !== 'px') {\n          unit = chain(unit);\n        }\n        if (unit !== newUnit) {\n          unit = newUnit;\n          while (unit !== 'px') {\n            unit = chain(unit, true);\n          }\n        }\n        this.unit = newUnit;\n        return this.toString();\n      }\n    }, {\n      key: 'valueOf',\n      value: function valueOf() {\n        return new Length(this.toString(), draft.defaults.units).value;\n      }\n    }, {\n      key: 'toString',\n      value: function toString() {\n        return this.value + this.unit;\n      }\n    }, {\n      key: 'type',\n      get: function get() {\n        return 'length';\n      }\n    }, {\n      key: 'regex',\n      get: function get() {\n        return '(px|pt|pc|in|ft|yd|mi|mm|cm|dm|km|m)';\n      }\n    }, {\n      key: 'units',\n      get: function get() {\n        return {\n          px: [1, 1, 'px'],\n          pt: [1, 72, 'px'],\n          pc: [12, 1, 'pt'],\n          in: [draft.defaults.dpi, 1, 'px'],\n          ft: [12, 1, 'in'],\n          yd: [3, 1, 'ft'],\n          mi: [1760, 1, 'yd'],\n          mm: [1, 25.4, 'in'],\n          cm: [10, 1, 'mm'],\n          dm: [10, 1, 'cm'],\n          m: [10, 1, 'dm'],\n          km: [1000, 1, 'm']\n        };\n      }\n    }]);\n    return Length;\n  }(draft.types.Float);\n  draft.types.length = function length(value, unit) {\n    return value == undefined ? value : new draft.types.Length(value, unit);\n  };\n  draft.types.Color = function () {\n    function Color(color) {\n      _classCallCheck(this, Color);\n      color = new RegExp('^(?:' + this.regex + ')$', 'i').exec(isNaN(color) ? color : color.toString(16));\n      if (color !== null) {\n        this.color = color[0].toLowerCase();\n        for (var i = 1; i <= 3; i++) {\n          color[i] = parseInt(color[i] || parseInt(color[i + 3] || color[i + 6].repeat(2), 16), 10);\n        }\n        this.red = color[1];\n        this.green = color[2];\n        this.blue = color[3];\n      }\n    }\n    _createClass(Color, [{\n      key: 'valueOf',\n      value: function valueOf() {\n        return this.red << 16 | this.green << 8 | this.blue;\n      }\n    }, {\n      key: 'toString',\n      value: function toString() {\n        return this.color;\n      }\n    }, {\n      key: 'type',\n      get: function get() {\n        return 'color';\n      }\n    }, {\n      key: 'regex',\n      get: function get() {\n        var rgbColor = '([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5])';\n        var rgb = 'rgb\\\\(' + rgbColor + ', ?' + rgbColor + ', ?' + rgbColor + '\\\\)';\n        var hexColor = '([0-9a-f]{2})'.repeat(3);\n        var hex = '#?(?:' + hexColor + '|' + hexColor.replace(/\\{2\\}/g, '') + ')';\n        // var hex = '#?(?:[0-9a-f]{3}){1,2}';\n\n        return rgb + '|' + hex;\n      }\n    }]);\n    return Color;\n  }();\n  draft.types.color = function color(value) {\n    return value == undefined ? value : new draft.types.Color(value);\n  };\n\n  // These methods are adapted from Oliver Caldwell's EventEmitter library, which\n  // he has released under the Unlicense (public domain).\n  // GitHub Repository: https://github.com/Olical/EventEmitter\n\n  // BACKLOG: implement bubbling?\n\n  draft.mixins.event = {\n    on: function on(evt, listener) {\n      var listenersMap = this.getListeners(evt, true);\n      for (var key in listenersMap) {\n        var listeners = listenersMap[key];\n        if (!(listeners.map(function (l) {\n          return l.listener;\n        }).indexOf(listener) !== -1)) {\n          listeners.push((typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) === 'object' ? listener : {\n            listener: listener,\n            once: false\n          });\n        }\n      }\n      return this;\n    },\n    once: function once(evt, listener) {\n      return this.on(evt, {\n        listener: listener,\n        once: true\n      });\n    },\n    off: function off(evt, listener) {\n      var listenersMap = this.getListeners(evt, true);\n      for (var key in listenersMap) {\n        var listeners = listenersMap[key];\n        var index = listeners.map(function (l) {\n          return l.listener;\n        }).lastIndexOf(listener);\n        if (index !== -1) {\n          listeners.splice(index, 1);\n        }\n      }\n      return this;\n    },\n    // TODO: use rest for args (...args)\n    fire: function fire(evt, args) {\n      // Put args in an array if it isn't already one\n      if (!Array.isArray(args)) {\n        args = [args];\n      }\n      var listenersMap = this.getListeners(evt, true);\n      for (var key in listenersMap) {\n        var listeners = listenersMap[key];\n        var i = listeners.length;\n        if (i > 0) {}\n        while (i--) {\n          var listener = listeners[i];\n          var response = listener.listener.apply({\n            target: this,\n            // TODO: Date.now() to prevent memory leaks?\n            timeStamp: Date(),\n            type: key\n          }, args);\n\n          // If the listener returns 'off' then it gets removed from the event\n          if (listener.once === true || response === 'off') {\n            this.off(evt, listener.listener);\n          }\n        }\n      }\n      return this;\n    },\n    defineEvent: function defineEvent() {\n      for (var _len = arguments.length, evts = Array(_len), _key = 0; _key < _len; _key++) {\n        evts[_key] = arguments[_key];\n      }\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n      try {\n        for (var _iterator = evts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var evt = _step.value;\n          this.getListeners(evt);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n      return this;\n    },\n    removeEvent: function removeEvent(evt) {\n      var events = this._getEvents();\n\n      // Remove different things depending on the state of evt\n      if (typeof evt === 'string') {\n        // Remove all listeners for the specified event\n        delete events[evt];\n      } else if (evt instanceof RegExp) {\n        // Remove all events matching the regex.\n        for (var key in events) {\n          if (evt.test(key)) {\n            delete events[key];\n          }\n        }\n      } else {\n        // Remove all listeners in all events\n        delete this._events;\n      }\n      return this;\n    },\n    getListeners: function getListeners(evt, map) {\n      var events = this._getEvents();\n      var listeners = {};\n\n      // Return a concatenated array of all matching events if\n      // the selector is a regular expression.\n      if (evt instanceof RegExp) {\n        for (var key in events) {\n          if (evt.test(key)) {\n            listeners[key] = events[key];\n          }\n        }\n      } else {\n        var listener = events[evt] || (events[evt] = []);\n        if (map === undefined) {\n          listeners = listener;\n        } else {\n          listeners[evt] = listener;\n        }\n      }\n\n      /* if (map !== undefined) {\n        listeners = Object.keys(listeners).map(key => listeners[key]);\n      } */\n\n      return listeners;\n    },\n    /**\n     * Fetches the events object and creates one if required.\n     *\n     * @return {Object} The events storage object.\n     * @api private\n     */\n    _getEvents: function _getEvents() {\n      return this._events || (this._events = {});\n    }\n  };\n  draft.mixins.system = {\n    // Cartesian:\n    // - page.system('cartesian')\n    // - (x, y)\n    // - x is right, y is up, z is out of the page (right-hand)\n    // - global origin (0, 0) is at bottom-left\n    //\n    // Polar:\n    // - page.system('polar')\n    // - (r, φ)\n    // - φ is counter-clockwise, with 0 pointing to the right\n    // - global pole (0, 0) is at center\n    //\n    // BACKLOG:30 remove svg coordinates?\n    // Web/SVG:\n    // - page.system('web')\n    // - (x, y)\n    // - x is right, y is down, z is out of the page (left-hand)\n    // - global origin (0, 0) is at top-left\n\n    // BACKLOG:10 switch φ for θ?\n    // BACKLOG:0 Spherical (ρ, θ, φ), Cylindrical (ρ, φ, z)\n\n    system: function system(_system) {\n      /* if (this.prop('system') != system) {\n        // BACKLOG:20 recursively convert all elements to new system?\n      } */\n      return this.prop('system', _system);\n    }\n  };\n  draft.defaults.system = 'cartesian';\n  draft.mixins.units = {\n    // Get/set the element's measurement units\n\n    units: function units(_units) {\n      return this.prop('units', _units);\n    }\n  };\n  draft.defaults.units = 'px';\n  draft.mixins.position = {\n    // TODO: find better way of only applying supplied values\n\n    position: function position(x, y, z) {\n      return this.prop({\n        x: draft.types.length(x),\n        y: draft.types.length(y),\n        z: draft.types.length(z)\n      });\n    },\n    pos: function pos() {\n      return this.position.apply(this, arguments);\n    },\n    translate: function translate(x, y, z) {\n      x = this.prop('x') + x || 0;\n      y = this.prop('y') + y || 0;\n      z = this.prop('z') + z || 0;\n      return this.position(x, y, z);\n    }\n  };\n  draft.mixins.rotation = {\n    rotation: function rotation(α, β, γ) {\n      return this.prop({\n        α: α,\n        β: β,\n        γ: γ\n      });\n    },\n    rot: function rot() {\n      return this.rotation.apply(this, arguments);\n    },\n    rotate: function rotate(α, β, γ) {\n      α = this.prop('α') + α || 0;\n      β = this.prop('β') + β || 0;\n      γ = this.prop('γ') + γ || 0;\n      return this.position(α, β, γ);\n    }\n  };\n  draft.mixins.fill = {\n    // TODO: combine color and opacity into fill()\n\n    fill: function fill(color) {\n      return this.fillColor(color);\n    },\n    fillColor: function fillColor(color) {\n      return this.prop('fill.color', draft.types.color(color));\n    },\n    fillOpacity: function fillOpacity(opacity) {\n      // TODO: move into generic function?\n      if (/^(0(\\.\\d*)?|1(\\.0*)?)$/.test(opacity)) {\n        opacity = parseFloat(opacity, 10);\n      }\n      return this.prop('fill.opacity', opacity);\n    }\n  };\n  draft.defaults['fill.color'] = '#fff';\n  draft.defaults['fill.opacity'] = 1;\n  draft.mixins.stroke = {\n    // TODO: combine color, opacity, and width into stroke()\n\n    stroke: function stroke(color) {\n      return this.strokeColor(color);\n    },\n    strokeColor: function strokeColor(color) {\n      return this.prop('stroke.color', draft.types.color(color));\n    },\n    strokeOpacity: function strokeOpacity(opacity) {\n      // TODO: move into generic function?\n      if (/^(0(\\.\\d*)?|1(\\.0*)?)$/.test(opacity)) {\n        opacity = parseFloat(opacity, 10);\n      }\n      return this.prop('stroke.opacity', opacity);\n    },\n    strokeWidth: function strokeWidth(width) {\n      return this.prop('stroke.width', draft.types.length(width));\n    }\n  };\n  draft.defaults['stroke.color'] = '#000';\n  draft.defaults['stroke.opacity'] = 1;\n  draft.defaults['stroke.width'] = 1;\n  draft.mixins.size = {\n    // Get/set the element's width & height\n\n    size: function size(width, height) {\n      return this.prop({\n        width: draft.types.length(width),\n        height: draft.types.length(height)\n        // depth: draft.types.length(depth)\n      });\n    },\n    scale: function scale(width, height) {\n      return this.prop({\n        width: this.prop('width') * width || undefined,\n        height: this.prop('height') * height || undefined\n        // depth: this.prop('depth') * depth || undefined\n      });\n    }\n  };\n  draft.mixins.radius = {\n    // Get/set the element's x radius\n\n    rx: function rx(_rx) {\n      return this.prop('rx', draft.types.length(_rx));\n    },\n    // Get/set the element's y radius\n    ry: function ry(_ry) {\n      return this.prop('ry', draft.types.length(_ry));\n    },\n    // Get/set the element's radius\n    radius: function radius(rx, ry) {\n      return this.prop({\n        rx: draft.types.length(rx),\n        ry: draft.types.length(ry)\n      });\n    }\n  };\n  draft.Element = function () {\n    function Element(name) {\n      _classCallCheck(this, Element);\n\n      // Make sure this._properties is initialized\n      this._properties = {};\n\n      // Set a name if given\n      if (name) {\n        this.prop('name', name);\n      }\n\n      // HACK:0 use this.constructor.name to get an element's type. Requires all\n      // subclasses to have a defined constructor.\n      for (var type in draft) {\n        if (this.constructor === draft[type]) {\n          this._type = type.toLowerCase();\n          break;\n        }\n      }\n      // console.log('TYPE:', type, 'NAME:', this.constructor.name);\n    }\n    _createClass(Element, [{\n      key: 'prop',\n      value: function prop(_prop, val) {\n        var obj = arguments.length <= 2 || arguments[2] === undefined ? this._properties : arguments[2];\n        if (_prop === undefined) {\n          // Act as a full properties getter if prop is undefined\n          // TODO: don't create a new object?\n          return Object(this._properties);\n        } else if (_prop === null) {\n          // BACKLOG: test deleting all properties, perhaps remove it\n          // Delete all properties if prop is null\n          this._properties = {};\n        } else if (typeof _prop === 'string') {\n          var props = draft.proxy(this._properties);\n          if (val === undefined) {\n            // Act as an individual property getter if val is undefined\n            // TODO: do a fuzzy-find? For example, el.prop('width') would match\n            // el._properties.size.width if el._properties.width is undefined\n            return _prop in props ? props[_prop] : null;\n          } else if (val === null) {\n            // Delete the property if val is null\n            delete props[_prop];\n          } else {\n            // Act as an individual property setter if both prop and val are defined\n\n            if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n              var unit = undefined;\n              switch (val.type) {\n                case 'length':\n                  unit = this.parent.prop('units') || draft.defaults.units;\n                  val.unit = val.unit || unit;\n                  val.convert(unit);\n                // Falls through\n                case 'color':\n                  val = String(val);\n                  break;\n              }\n            }\n            props[_prop] = val;\n          }\n          this.fire('change', [_prop, val]);\n        } else if ((typeof _prop === 'undefined' ? 'undefined' : _typeof(_prop)) === 'object') {\n          // Act as a getter if prop is an object with only null values.\n          // Act as a setter if prop is an object with at least one non-null value.\n          var setter = false;\n          for (var p in _prop) {\n            // Get this._properties[p] and save it to prop[p]\n            _prop[p] = this.prop(p, _prop[p], obj);\n            // If the returned value is an object, prop[p] is non-null, so act like\n            // a setter.\n            setter = setter || _typeof(_prop[p]) == 'object';\n          }\n          return setter ? this : _prop;\n        }\n\n        // Chainable if 'this' is returned\n        return this;\n      }\n\n      // TODO: use rest (...blacklist)\n    }, {\n      key: 'stringify',\n      value: function stringify(blacklist) {\n        var replacer;\n        if (Array.isArray(blacklist)) {\n          replacer = function (key, val) {\n            if (blacklist.indexOf(key) !== -1) {\n              return undefined;\n            }\n            return val;\n          };\n        } else if (blacklist instanceof RegExp) {\n          replacer = function (key, val) {\n            if (blacklist.test(key)) {\n              return undefined;\n            }\n            return val;\n          };\n        }\n        return JSON.stringify(this, replacer, 2);\n      }\n    }, {\n      key: 'toJSON',\n      value: function toJSON() {\n        return {\n          type: this.type,\n          id: this.id,\n          properties: this.prop(),\n          children: this.children\n        };\n      }\n    }, {\n      key: 'type',\n      get: function get() {\n        return this._type;\n      }\n    }, {\n      key: 'id',\n      get: function get() {\n        return this._id;\n      }\n    }, {\n      key: 'name',\n      get: function get() {\n        return this.prop('name');\n      }\n\n      // Construct a unique ID from the element's type and ID\n    }, {\n      key: 'domID',\n      get: function get() {\n        var id = String(this.id);\n        while (id.length < 4) {\n          id = '0' + id;\n        }\n        return this.type + '_' + id;\n      }\n    }], [{\n      key: 'inherit',\n      value: function inherit(source, addSuper) {\n        draft.inherit(this, source, addSuper);\n      }\n    }, {\n      key: 'mixin',\n      value: function mixin(source) {\n        draft.mixin(this, source);\n      }\n\n      // TODO:40 merge require() with mixin()?\n    }, {\n      key: 'require',\n      value: function require(source) {\n        if (typeof source == 'string') {\n          this.mixin(draft.mixins[source]);\n        } else if (Array.isArray(source)) {\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n          try {\n            for (var _iterator2 = source[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var mixin = _step2.value;\n              this.require(mixin);\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n      }\n    }]);\n    return Element;\n  }();\n  draft.Element.require(['event', 'position', 'rotation']);\n  draft.Container = function (_draft$Element) {\n    _inherits(Container, _draft$Element);\n    function Container(name) {\n      _classCallCheck(this, Container);\n\n      // Initialize children array\n\n      var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(Container).call(this, name));\n      _this3.children = [];\n      return _this3;\n    }\n    _createClass(Container, [{\n      key: 'add',\n      value: function add(child) {\n        // Add a reference to the child's parent and containing doc\n        child.parent = this;\n        child.doc = this.doc || this;\n\n        // Add the child to its type array\n        var type = child.type;\n        (child.doc.elements[type] || (child.doc.elements[type] = [])).push(child);\n        // Set the child's id\n        child._id = child.doc.elements[type].length;\n\n        // Add the child to the end of the children array\n        this.children.push(child);\n\n        // Fire the 'add' event to all listeners\n        this.fire('add', [child]);\n        return this;\n      }\n    }, {\n      key: 'push',\n      value: function push(child) {\n        this.add(child);\n        return child;\n      }\n    }, {\n      key: 'remove',\n      value: function remove(child) {\n        this.fire('remove', [child]);\n        return this;\n      }\n    }, {\n      key: 'firstChild',\n      get: function get() {\n        return this.children[0];\n      }\n    }, {\n      key: 'lastChild',\n      get: function get() {\n        return this.children[this.children.length - 1];\n      }\n    }]);\n    return Container;\n  }(draft.Element);\n  draft.Doc = function (_draft$Container) {\n    _inherits(Doc, _draft$Container);\n    function Doc(name) {\n      _classCallCheck(this, Doc);\n\n      // Initialize elements container\n\n      var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(Doc).call(this, name));\n      _this4.elements = {};\n      _this4.prop({\n        system: draft.defaults.system,\n        units: draft.defaults.units\n      });\n      return _this4;\n    }\n    return Doc;\n  }(draft.Container);\n  draft.doc = function doc(name) {\n    var newDoc = new draft.Doc(name);\n    (draft.docs || (draft.docs = [])).push(newDoc);\n    newDoc._id = draft.docs.length;\n    return newDoc;\n  };\n  draft.Group = function (_draft$Container2) {\n    _inherits(Group, _draft$Container2);\n    function Group() {\n      _classCallCheck(this, Group);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Group).apply(this, arguments));\n    }\n    return Group;\n  }(draft.Container);\n  draft.Group.require(['system', 'units']);\n\n  // TODO: mixin to draft.Group?\n  draft.Container.mixin({\n    group: function group(name) {\n      return this.push(new draft.Group(name)).prop({\n        system: this.prop('system'),\n        units: this.prop('units')\n      });\n    }\n  });\n  draft.View = function (_draft$Element2) {\n    _inherits(View, _draft$Element2);\n    function View() {\n      _classCallCheck(this, View);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(View).apply(this, arguments));\n    }\n    _createClass(View, [{\n      key: 'aspectRatio',\n      /* render(renderer) {\n        this['render' + renderer.toUpperCase()]();\n      } */\n\n      get: function get() {\n        var width = draft.types.length(this.prop('width')).value;\n        var height = draft.types.length(this.prop('height')).value;\n        var gcd = function gcd(a, b) {\n          return b ? gcd(b, a % b) : a;\n        };\n        gcd = gcd(width, height);\n        return width / gcd + ':' + height / gcd;\n      }\n    }]);\n    return View;\n  }(draft.Element);\n  draft.View.require('size');\n  draft.Group.mixin({\n    // TODO: get group bounding box for default size\n\n    view: function view() {\n      var width = arguments.length <= 0 || arguments[0] === undefined ? 100 : arguments[0];\n      var height = arguments.length <= 1 || arguments[1] === undefined ? 100 : arguments[1];\n      return this.push(new draft.View()).size(width, height);\n    }\n  });\n  draft.Point = function (_draft$Element3) {\n    _inherits(Point, _draft$Element3);\n    function Point() {\n      _classCallCheck(this, Point);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Point).apply(this, arguments));\n    }\n    return Point;\n  }(draft.Element);\n  draft.Point.require('stroke');\n  draft.Group.mixin({\n    point: function point() {\n      return this.push(new draft.Point());\n    }\n  });\n  draft.Line = function (_draft$Point) {\n    _inherits(Line, _draft$Point);\n    function Line() {\n      _classCallCheck(this, Line);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Line).apply(this, arguments));\n    }\n    _createClass(Line, [{\n      key: 'length',\n      value: function length(_length) {\n        return this.prop('length', draft.types.length(_length));\n      }\n    }]);\n    return Line;\n  }(draft.Point);\n  draft.Group.mixin({\n    line: function line() {\n      var length = arguments.length <= 0 || arguments[0] === undefined ? 100 : arguments[0];\n      return this.push(new draft.Line()).length(length);\n    }\n  });\n  draft.Shape = function (_draft$Point2) {\n    _inherits(Shape, _draft$Point2);\n    function Shape() {\n      _classCallCheck(this, Shape);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Shape).apply(this, arguments));\n    }\n    return Shape;\n  }(draft.Point);\n  draft.Shape.require(['fill', 'size']);\n  draft.Rect = function (_draft$Shape) {\n    _inherits(Rect, _draft$Shape);\n    function Rect() {\n      _classCallCheck(this, Rect);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Rect).apply(this, arguments));\n    }\n    _createClass(Rect, [{\n      key: 'rekt',\n      // Hehehe\n      get: function get() {\n        return Math.floor(Math.random() * 101) + '% rekt';\n      }\n    }]);\n    return Rect;\n  }(draft.Shape);\n  draft.Rect.require('radius');\n  draft.Group.mixin({\n    rect: function rect() {\n      var width = arguments.length <= 0 || arguments[0] === undefined ? 100 : arguments[0];\n      var height = arguments.length <= 1 || arguments[1] === undefined ? 100 : arguments[1];\n      return this.push(new draft.Rect()).size(width, height);\n    }\n  });\n  draft.Circle = function (_draft$Shape2) {\n    _inherits(Circle, _draft$Shape2);\n    function Circle() {\n      _classCallCheck(this, Circle);\n      return _possibleConstructorReturn(this, Object.getPrototypeOf(Circle).apply(this, arguments));\n    }\n    _createClass(Circle, [{\n      key: 'radius',\n      value: function radius(r) {\n        return this.prop('r', draft.types.length(r));\n      }\n    }]);\n    return Circle;\n  }(draft.Shape);\n  draft.Group.mixin({\n    circle: function circle() {\n      var r = arguments.length <= 0 || arguments[0] === undefined ? 50 : arguments[0];\n      return this.push(new draft.Circle()).radius(r);\n    }\n  });\n  return draft;\n});","map":{"version":3,"names":["root","factory","define","amd","exports","module","draft","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","value","err","Array","isArray","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_classCallCheck","instance","_typeof","obj","name","doc","types","mixins","inherit","destination","source","addSuper","proto","_super","mixin","hasOwnProperty","proxy","setInit","arguments","access","prop","init","split","p","shift","handler","has","_access","_access2","t","get","_access3","_access4","set","val","_access5","_access6","deleteProperty","_access7","_access8","Proxy","defaults","dpi","test","document","createElement","style","width","padding","getElementsByTagName","appendChild","offsetWidth","removeChild","Float","parseFloat","valueOf","float","regex","RegExp","exec","toLowerCase","Length","_draft$types$Float","unit","_this","getPrototypeOf","isNaN","convert","newUnit","_this2","chain","reverse","units","toString","px","pt","pc","in","ft","yd","mi","mm","cm","dm","m","km","Color","color","parseInt","repeat","red","green","blue","rgbColor","rgb","hexColor","hex","replace","event","on","evt","listener","listenersMap","getListeners","listeners","map","l","indexOf","once","off","index","lastIndexOf","splice","fire","args","response","apply","timeStamp","Date","type","defineEvent","_len","evts","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","return","removeEvent","events","_getEvents","_events","system","_system","_units","position","x","y","z","pos","translate","rotation","α","β","γ","rot","rotate","fill","fillColor","fillOpacity","opacity","stroke","strokeColor","strokeOpacity","strokeWidth","size","height","scale","radius","rx","_rx","ry","_ry","Element","_properties","_type","_prop","parent","String","setter","stringify","blacklist","replacer","JSON","toJSON","id","properties","children","_id","require","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","Container","_draft$Element","_this3","add","child","elements","remove","Doc","_draft$Container","_this4","newDoc","docs","Group","_draft$Container2","group","View","_draft$Element2","gcd","a","b","view","Point","_draft$Element3","point","Line","_draft$Point","_length","line","Shape","_draft$Point2","Rect","_draft$Shape","Math","floor","random","rect","Circle","_draft$Shape2","r","circle"],"sources":["C:/Users/udaym/OneDrive/Desktop/DraftJsEditor/node_modules/draft.js/dist/draft.js"],"sourcesContent":["/*\n* draft.js - A lightweight library for parametric design\n* version v0.2.0\n* http://draft.D1SC0te.ch\n*\n* copyright Jordi Pakey-Rodriguez <jordi.orlando@hexa.io>\n* license MIT\n*\n* BUILT: Fri Feb 05 2016 10:46:44 GMT-0600 (CST)\n*/\n;(function(root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.draft = factory();\n  }\n}(this, function() {\n'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; })();\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _typeof(obj) { return obj && typeof Symbol !== \"undefined\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; }\n\nvar draft = function draft(name) {\n  return draft.doc(name);\n};\n\n// Initialize types and mixins\ndraft.types = {};\ndraft.mixins = {};\n\n// TODO: prefer operators at beginning of lines?\n\n// These methods are adapted from Oliver Caldwell's Heir script, which he has\n// released under the Unlicense (public domain).\n// GitHub Repository: https://github.com/Olical/Heir\n\ndraft.inherit = function inherit(destination, source, addSuper) {\n  var proto = destination.prototype = Object.create(source.prototype);\n  proto.constructor = destination;\n\n  if (addSuper || typeof addSuper === 'undefined') {\n    destination._super = source.prototype;\n  }\n};\n\ndraft.mixin = function mixin(destination, source) {\n  for (var key in source) {\n    if (source.hasOwnProperty(key)) {\n      destination.prototype[key] = source[key];\n    }\n  }\n};\n\ndraft.proxy = function proxy(obj) {\n  var setInit = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\n  var access = function access(target, prop, init) {\n    if (typeof prop === 'string') {\n      return access(target, prop.split('.'), init);\n    }\n\n    var p = prop.shift();\n\n    if (prop.length && (typeof target === 'undefined' ? 'undefined' : _typeof(target)) === 'object' && (init || p in target)) {\n      // TODO: when init is false, setting obj['foo.bar'] will incorrectly set\n      // obj['foo'] instead\n      return access(p in target ? target[p] : target[p] = {}, prop, init);\n    }\n\n    return [target, p];\n  };\n\n  // TODO: return null if the property does not exist or was not set/deleted?\n  var handler = {\n    has: function has(target, prop) {\n      var _access = access(target, prop);\n\n      var _access2 = _slicedToArray(_access, 2);\n\n      var t = _access2[0];\n      var p = _access2[1];\n\n      return !!t[p];\n    },\n    get: function get(target, prop) {\n      var _access3 = access(target, prop);\n\n      var _access4 = _slicedToArray(_access3, 2);\n\n      var t = _access4[0];\n      var p = _access4[1];\n\n      return t[p];\n    },\n    set: function set(target, prop, val) {\n      var _access5 = access(target, prop, setInit);\n\n      var _access6 = _slicedToArray(_access5, 2);\n\n      var t = _access6[0];\n      var p = _access6[1];\n\n      t[p] = val;\n      return true;\n    },\n    deleteProperty: function deleteProperty(target, prop) {\n      var _access7 = access(target, prop);\n\n      var _access8 = _slicedToArray(_access7, 2);\n\n      var t = _access8[0];\n      var p = _access8[1];\n\n      return delete t[p];\n    }\n  };\n\n  // BACKLOG: wait for browser support for ES6 proxies\n  return typeof Proxy === 'function' ? new Proxy(obj, handler) : obj;\n};\n\n// TODO: configurable defaults\ndraft.defaults = draft.proxy({\n  get dpi() {\n    var test = document.createElement('div');\n    test.style.width = '1in';\n    test.style.padding = 0;\n    document.getElementsByTagName('body')[0].appendChild(test);\n\n    var dpi = test.offsetWidth;\n\n    document.getElementsByTagName('body')[0].removeChild(test);\n\n    // Fall back to standard 96dpi resolution\n    return dpi || 96;\n  }\n});\n\ndraft.types.Float = (function () {\n  function Float(value) {\n    _classCallCheck(this, Float);\n\n    this.value = parseFloat(value);\n  }\n\n  _createClass(Float, [{\n    key: 'valueOf',\n    value: function valueOf() {\n      return this.value;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return 'float';\n    }\n  }, {\n    key: 'regex',\n    get: function get() {\n      // Matches all floating point values. Should match:\n      // 123\n      // -123.45\n      // 123e5\n      // 123.45E+5\n      return '[-+]?[0-9]*\\\\.?[0-9]+(?:[eE][-+]?[0-9]+)?';\n    }\n  }]);\n\n  return Float;\n})();\n\ndraft.types.float = function float(value) {\n  return value == undefined ? value : new draft.types.Float(value);\n};\n\nvar test = function test(val, regex) {\n  // TODO: strict match anchor (^ instead of word end)\n  regex = new RegExp(regex + '$', 'i');\n  val = regex.exec(val);\n  return val ? val[0].toLowerCase() : false;\n};\n\ndraft.types.Length = (function (_draft$types$Float) {\n  _inherits(Length, _draft$types$Float);\n\n  function Length(value, unit) {\n    _classCallCheck(this, Length);\n\n    var _this = _possibleConstructorReturn(this, Object.getPrototypeOf(Length).call(this, value));\n\n    value = test(value, _this.regex);\n    unit = test(unit, _this.regex);\n\n    if (!isNaN(_this.value) && (value || unit)) {\n      _this.unit = value || unit;\n      _this.convert(unit);\n    } else {\n      _this.unit = '';\n    }\n    return _this;\n  }\n\n  _createClass(Length, [{\n    key: 'convert',\n    value: function convert(newUnit) {\n      var _this2 = this;\n\n      newUnit = test(newUnit, this.regex);\n\n      if (!newUnit) {\n        return false;\n      }\n\n      var chain = function chain(unit, reverse) {\n        var units = _this2.units[unit];\n\n        _this2.value *= reverse ? units[1] : units[0];\n        _this2.value /= reverse ? units[0] : units[1];\n\n        return units[2];\n      };\n\n      var unit = this.unit;\n      while (unit !== newUnit && unit !== 'px') {\n        unit = chain(unit);\n      }\n\n      if (unit !== newUnit) {\n        unit = newUnit;\n        while (unit !== 'px') {\n          unit = chain(unit, true);\n        }\n      }\n\n      this.unit = newUnit;\n\n      return this.toString();\n    }\n  }, {\n    key: 'valueOf',\n    value: function valueOf() {\n      return new Length(this.toString(), draft.defaults.units).value;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.value + this.unit;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return 'length';\n    }\n  }, {\n    key: 'regex',\n    get: function get() {\n      return '(px|pt|pc|in|ft|yd|mi|mm|cm|dm|km|m)';\n    }\n  }, {\n    key: 'units',\n    get: function get() {\n      return {\n        px: [1, 1, 'px'],\n        pt: [1, 72, 'px'],\n        pc: [12, 1, 'pt'],\n        in: [draft.defaults.dpi, 1, 'px'],\n        ft: [12, 1, 'in'],\n        yd: [3, 1, 'ft'],\n        mi: [1760, 1, 'yd'],\n        mm: [1, 25.4, 'in'],\n        cm: [10, 1, 'mm'],\n        dm: [10, 1, 'cm'],\n        m: [10, 1, 'dm'],\n        km: [1000, 1, 'm']\n      };\n    }\n  }]);\n\n  return Length;\n})(draft.types.Float);\n\ndraft.types.length = function length(value, unit) {\n  return value == undefined ? value : new draft.types.Length(value, unit);\n};\n\ndraft.types.Color = (function () {\n  function Color(color) {\n    _classCallCheck(this, Color);\n\n    color = new RegExp('^(?:' + this.regex + ')$', 'i').exec(isNaN(color) ? color : color.toString(16));\n\n    if (color !== null) {\n      this.color = color[0].toLowerCase();\n\n      for (var i = 1; i <= 3; i++) {\n        color[i] = parseInt(color[i] || parseInt(color[i + 3] || color[i + 6].repeat(2), 16), 10);\n      }\n\n      this.red = color[1];\n      this.green = color[2];\n      this.blue = color[3];\n    }\n  }\n\n  _createClass(Color, [{\n    key: 'valueOf',\n    value: function valueOf() {\n      return this.red << 16 | this.green << 8 | this.blue;\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return this.color;\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return 'color';\n    }\n  }, {\n    key: 'regex',\n    get: function get() {\n      var rgbColor = '([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5])';\n      var rgb = 'rgb\\\\(' + rgbColor + ', ?' + rgbColor + ', ?' + rgbColor + '\\\\)';\n\n      var hexColor = '([0-9a-f]{2})'.repeat(3);\n      var hex = '#?(?:' + hexColor + '|' + hexColor.replace(/\\{2\\}/g, '') + ')';\n      // var hex = '#?(?:[0-9a-f]{3}){1,2}';\n\n      return rgb + '|' + hex;\n    }\n  }]);\n\n  return Color;\n})();\n\ndraft.types.color = function color(value) {\n  return value == undefined ? value : new draft.types.Color(value);\n};\n\n// These methods are adapted from Oliver Caldwell's EventEmitter library, which\n// he has released under the Unlicense (public domain).\n// GitHub Repository: https://github.com/Olical/EventEmitter\n\n// BACKLOG: implement bubbling?\n\ndraft.mixins.event = {\n  on: function on(evt, listener) {\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n\n      if (!(listeners.map(function (l) {\n        return l.listener;\n      }).indexOf(listener) !== -1)) {\n        listeners.push((typeof listener === 'undefined' ? 'undefined' : _typeof(listener)) === 'object' ? listener : {\n          listener: listener,\n          once: false\n        });\n      }\n    }\n\n    return this;\n  },\n  once: function once(evt, listener) {\n    return this.on(evt, {\n      listener: listener,\n      once: true\n    });\n  },\n  off: function off(evt, listener) {\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n      var index = listeners.map(function (l) {\n        return l.listener;\n      }).lastIndexOf(listener);\n\n      if (index !== -1) {\n        listeners.splice(index, 1);\n      }\n    }\n\n    return this;\n  },\n\n  // TODO: use rest for args (...args)\n  fire: function fire(evt, args) {\n    // Put args in an array if it isn't already one\n    if (!Array.isArray(args)) {\n      args = [args];\n    }\n\n    var listenersMap = this.getListeners(evt, true);\n\n    for (var key in listenersMap) {\n      var listeners = listenersMap[key];\n      var i = listeners.length;\n\n      if (i > 0) {}\n\n      while (i--) {\n        var listener = listeners[i];\n        var response = listener.listener.apply({\n          target: this,\n          // TODO: Date.now() to prevent memory leaks?\n          timeStamp: Date(),\n          type: key\n        }, args);\n\n        // If the listener returns 'off' then it gets removed from the event\n        if (listener.once === true || response === 'off') {\n          this.off(evt, listener.listener);\n        }\n      }\n    }\n\n    return this;\n  },\n  defineEvent: function defineEvent() {\n    for (var _len = arguments.length, evts = Array(_len), _key = 0; _key < _len; _key++) {\n      evts[_key] = arguments[_key];\n    }\n\n    var _iteratorNormalCompletion = true;\n    var _didIteratorError = false;\n    var _iteratorError = undefined;\n\n    try {\n      for (var _iterator = evts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n        var evt = _step.value;\n\n        this.getListeners(evt);\n      }\n    } catch (err) {\n      _didIteratorError = true;\n      _iteratorError = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion && _iterator.return) {\n          _iterator.return();\n        }\n      } finally {\n        if (_didIteratorError) {\n          throw _iteratorError;\n        }\n      }\n    }\n\n    return this;\n  },\n  removeEvent: function removeEvent(evt) {\n    var events = this._getEvents();\n\n    // Remove different things depending on the state of evt\n    if (typeof evt === 'string') {\n      // Remove all listeners for the specified event\n      delete events[evt];\n    } else if (evt instanceof RegExp) {\n      // Remove all events matching the regex.\n      for (var key in events) {\n        if (evt.test(key)) {\n          delete events[key];\n        }\n      }\n    } else {\n      // Remove all listeners in all events\n      delete this._events;\n    }\n\n    return this;\n  },\n  getListeners: function getListeners(evt, map) {\n    var events = this._getEvents();\n    var listeners = {};\n\n    // Return a concatenated array of all matching events if\n    // the selector is a regular expression.\n    if (evt instanceof RegExp) {\n      for (var key in events) {\n        if (evt.test(key)) {\n          listeners[key] = events[key];\n        }\n      }\n    } else {\n      var listener = events[evt] || (events[evt] = []);\n\n      if (map === undefined) {\n        listeners = listener;\n      } else {\n        listeners[evt] = listener;\n      }\n    }\n\n    /* if (map !== undefined) {\n      listeners = Object.keys(listeners).map(key => listeners[key]);\n    } */\n\n    return listeners;\n  },\n\n  /**\n   * Fetches the events object and creates one if required.\n   *\n   * @return {Object} The events storage object.\n   * @api private\n   */\n  _getEvents: function _getEvents() {\n    return this._events || (this._events = {});\n  }\n};\n\ndraft.mixins.system = {\n  // Cartesian:\n  // - page.system('cartesian')\n  // - (x, y)\n  // - x is right, y is up, z is out of the page (right-hand)\n  // - global origin (0, 0) is at bottom-left\n  //\n  // Polar:\n  // - page.system('polar')\n  // - (r, φ)\n  // - φ is counter-clockwise, with 0 pointing to the right\n  // - global pole (0, 0) is at center\n  //\n  // BACKLOG:30 remove svg coordinates?\n  // Web/SVG:\n  // - page.system('web')\n  // - (x, y)\n  // - x is right, y is down, z is out of the page (left-hand)\n  // - global origin (0, 0) is at top-left\n\n  // BACKLOG:10 switch φ for θ?\n  // BACKLOG:0 Spherical (ρ, θ, φ), Cylindrical (ρ, φ, z)\n\n  system: function system(_system) {\n    /* if (this.prop('system') != system) {\n      // BACKLOG:20 recursively convert all elements to new system?\n    } */\n    return this.prop('system', _system);\n  }\n};\n\ndraft.defaults.system = 'cartesian';\n\ndraft.mixins.units = {\n  // Get/set the element's measurement units\n\n  units: function units(_units) {\n    return this.prop('units', _units);\n  }\n};\n\ndraft.defaults.units = 'px';\n\ndraft.mixins.position = {\n  // TODO: find better way of only applying supplied values\n\n  position: function position(x, y, z) {\n    return this.prop({\n      x: draft.types.length(x),\n      y: draft.types.length(y),\n      z: draft.types.length(z)\n    });\n  },\n  pos: function pos() {\n    return this.position.apply(this, arguments);\n  },\n  translate: function translate(x, y, z) {\n    x = this.prop('x') + x || 0;\n    y = this.prop('y') + y || 0;\n    z = this.prop('z') + z || 0;\n\n    return this.position(x, y, z);\n  }\n};\n\ndraft.mixins.rotation = {\n  rotation: function rotation(α, β, γ) {\n    return this.prop({\n      α: α,\n      β: β,\n      γ: γ\n    });\n  },\n  rot: function rot() {\n    return this.rotation.apply(this, arguments);\n  },\n  rotate: function rotate(α, β, γ) {\n    α = this.prop('α') + α || 0;\n    β = this.prop('β') + β || 0;\n    γ = this.prop('γ') + γ || 0;\n\n    return this.position(α, β, γ);\n  }\n};\n\ndraft.mixins.fill = {\n  // TODO: combine color and opacity into fill()\n\n  fill: function fill(color) {\n    return this.fillColor(color);\n  },\n  fillColor: function fillColor(color) {\n    return this.prop('fill.color', draft.types.color(color));\n  },\n  fillOpacity: function fillOpacity(opacity) {\n    // TODO: move into generic function?\n    if (/^(0(\\.\\d*)?|1(\\.0*)?)$/.test(opacity)) {\n      opacity = parseFloat(opacity, 10);\n    }\n\n    return this.prop('fill.opacity', opacity);\n  }\n};\n\ndraft.defaults['fill.color'] = '#fff';\ndraft.defaults['fill.opacity'] = 1;\n\ndraft.mixins.stroke = {\n  // TODO: combine color, opacity, and width into stroke()\n\n  stroke: function stroke(color) {\n    return this.strokeColor(color);\n  },\n  strokeColor: function strokeColor(color) {\n    return this.prop('stroke.color', draft.types.color(color));\n  },\n  strokeOpacity: function strokeOpacity(opacity) {\n    // TODO: move into generic function?\n    if (/^(0(\\.\\d*)?|1(\\.0*)?)$/.test(opacity)) {\n      opacity = parseFloat(opacity, 10);\n    }\n\n    return this.prop('stroke.opacity', opacity);\n  },\n  strokeWidth: function strokeWidth(width) {\n    return this.prop('stroke.width', draft.types.length(width));\n  }\n};\n\ndraft.defaults['stroke.color'] = '#000';\ndraft.defaults['stroke.opacity'] = 1;\ndraft.defaults['stroke.width'] = 1;\n\ndraft.mixins.size = {\n  // Get/set the element's width & height\n\n  size: function size(width, height) {\n    return this.prop({\n      width: draft.types.length(width),\n      height: draft.types.length(height)\n      // depth: draft.types.length(depth)\n    });\n  },\n  scale: function scale(width, height) {\n    return this.prop({\n      width: this.prop('width') * width || undefined,\n      height: this.prop('height') * height || undefined\n      // depth: this.prop('depth') * depth || undefined\n    });\n  }\n};\n\ndraft.mixins.radius = {\n  // Get/set the element's x radius\n\n  rx: function rx(_rx) {\n    return this.prop('rx', draft.types.length(_rx));\n  },\n\n  // Get/set the element's y radius\n  ry: function ry(_ry) {\n    return this.prop('ry', draft.types.length(_ry));\n  },\n\n  // Get/set the element's radius\n  radius: function radius(rx, ry) {\n    return this.prop({\n      rx: draft.types.length(rx),\n      ry: draft.types.length(ry)\n    });\n  }\n};\n\ndraft.Element = (function () {\n  function Element(name) {\n    _classCallCheck(this, Element);\n\n    // Make sure this._properties is initialized\n    this._properties = {};\n\n    // Set a name if given\n    if (name) {\n      this.prop('name', name);\n    }\n\n    // HACK:0 use this.constructor.name to get an element's type. Requires all\n    // subclasses to have a defined constructor.\n    for (var type in draft) {\n      if (this.constructor === draft[type]) {\n        this._type = type.toLowerCase();\n        break;\n      }\n    }\n    // console.log('TYPE:', type, 'NAME:', this.constructor.name);\n  }\n\n  _createClass(Element, [{\n    key: 'prop',\n    value: function prop(_prop, val) {\n      var obj = arguments.length <= 2 || arguments[2] === undefined ? this._properties : arguments[2];\n\n      if (_prop === undefined) {\n        // Act as a full properties getter if prop is undefined\n        // TODO: don't create a new object?\n        return Object(this._properties);\n      } else if (_prop === null) {\n        // BACKLOG: test deleting all properties, perhaps remove it\n        // Delete all properties if prop is null\n        this._properties = {};\n      } else if (typeof _prop === 'string') {\n        var props = draft.proxy(this._properties);\n\n        if (val === undefined) {\n          // Act as an individual property getter if val is undefined\n          // TODO: do a fuzzy-find? For example, el.prop('width') would match\n          // el._properties.size.width if el._properties.width is undefined\n          return _prop in props ? props[_prop] : null;\n        } else if (val === null) {\n          // Delete the property if val is null\n          delete props[_prop];\n        } else {\n          // Act as an individual property setter if both prop and val are defined\n\n          if ((typeof val === 'undefined' ? 'undefined' : _typeof(val)) === 'object') {\n            var unit = undefined;\n\n            switch (val.type) {\n              case 'length':\n                unit = this.parent.prop('units') || draft.defaults.units;\n                val.unit = val.unit || unit;\n                val.convert(unit);\n              // Falls through\n              case 'color':\n                val = String(val);\n                break;\n            }\n          }\n\n          props[_prop] = val;\n        }\n\n        this.fire('change', [_prop, val]);\n      } else if ((typeof _prop === 'undefined' ? 'undefined' : _typeof(_prop)) === 'object') {\n        // Act as a getter if prop is an object with only null values.\n        // Act as a setter if prop is an object with at least one non-null value.\n        var setter = false;\n\n        for (var p in _prop) {\n          // Get this._properties[p] and save it to prop[p]\n          _prop[p] = this.prop(p, _prop[p], obj);\n          // If the returned value is an object, prop[p] is non-null, so act like\n          // a setter.\n          setter = setter || _typeof(_prop[p]) == 'object';\n        }\n\n        return setter ? this : _prop;\n      }\n\n      // Chainable if 'this' is returned\n      return this;\n    }\n\n    // TODO: use rest (...blacklist)\n\n  }, {\n    key: 'stringify',\n    value: function stringify(blacklist) {\n      var replacer;\n\n      if (Array.isArray(blacklist)) {\n        replacer = function (key, val) {\n          if (blacklist.indexOf(key) !== -1) {\n            return undefined;\n          }\n\n          return val;\n        };\n      } else if (blacklist instanceof RegExp) {\n        replacer = function (key, val) {\n          if (blacklist.test(key)) {\n            return undefined;\n          }\n\n          return val;\n        };\n      }\n\n      return JSON.stringify(this, replacer, 2);\n    }\n  }, {\n    key: 'toJSON',\n    value: function toJSON() {\n      return {\n        type: this.type,\n        id: this.id,\n        properties: this.prop(),\n        children: this.children\n      };\n    }\n  }, {\n    key: 'type',\n    get: function get() {\n      return this._type;\n    }\n  }, {\n    key: 'id',\n    get: function get() {\n      return this._id;\n    }\n  }, {\n    key: 'name',\n    get: function get() {\n      return this.prop('name');\n    }\n\n    // Construct a unique ID from the element's type and ID\n\n  }, {\n    key: 'domID',\n    get: function get() {\n      var id = String(this.id);\n      while (id.length < 4) {\n        id = '0' + id;\n      }\n\n      return this.type + '_' + id;\n    }\n  }], [{\n    key: 'inherit',\n    value: function inherit(source, addSuper) {\n      draft.inherit(this, source, addSuper);\n    }\n  }, {\n    key: 'mixin',\n    value: function mixin(source) {\n      draft.mixin(this, source);\n    }\n\n    // TODO:40 merge require() with mixin()?\n\n  }, {\n    key: 'require',\n    value: function require(source) {\n      if (typeof source == 'string') {\n        this.mixin(draft.mixins[source]);\n      } else if (Array.isArray(source)) {\n        var _iteratorNormalCompletion2 = true;\n        var _didIteratorError2 = false;\n        var _iteratorError2 = undefined;\n\n        try {\n          for (var _iterator2 = source[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n            var mixin = _step2.value;\n\n            this.require(mixin);\n          }\n        } catch (err) {\n          _didIteratorError2 = true;\n          _iteratorError2 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion2 && _iterator2.return) {\n              _iterator2.return();\n            }\n          } finally {\n            if (_didIteratorError2) {\n              throw _iteratorError2;\n            }\n          }\n        }\n      }\n    }\n  }]);\n\n  return Element;\n})();\n\ndraft.Element.require(['event', 'position', 'rotation']);\n\ndraft.Container = (function (_draft$Element) {\n  _inherits(Container, _draft$Element);\n\n  function Container(name) {\n    _classCallCheck(this, Container);\n\n    // Initialize children array\n\n    var _this3 = _possibleConstructorReturn(this, Object.getPrototypeOf(Container).call(this, name));\n\n    _this3.children = [];\n    return _this3;\n  }\n\n  _createClass(Container, [{\n    key: 'add',\n    value: function add(child) {\n      // Add a reference to the child's parent and containing doc\n      child.parent = this;\n      child.doc = this.doc || this;\n\n      // Add the child to its type array\n      var type = child.type;\n      (child.doc.elements[type] || (child.doc.elements[type] = [])).push(child);\n      // Set the child's id\n      child._id = child.doc.elements[type].length;\n\n      // Add the child to the end of the children array\n      this.children.push(child);\n\n      // Fire the 'add' event to all listeners\n      this.fire('add', [child]);\n\n      return this;\n    }\n  }, {\n    key: 'push',\n    value: function push(child) {\n      this.add(child);\n      return child;\n    }\n  }, {\n    key: 'remove',\n    value: function remove(child) {\n      this.fire('remove', [child]);\n      return this;\n    }\n  }, {\n    key: 'firstChild',\n    get: function get() {\n      return this.children[0];\n    }\n  }, {\n    key: 'lastChild',\n    get: function get() {\n      return this.children[this.children.length - 1];\n    }\n  }]);\n\n  return Container;\n})(draft.Element);\n\ndraft.Doc = (function (_draft$Container) {\n  _inherits(Doc, _draft$Container);\n\n  function Doc(name) {\n    _classCallCheck(this, Doc);\n\n    // Initialize elements container\n\n    var _this4 = _possibleConstructorReturn(this, Object.getPrototypeOf(Doc).call(this, name));\n\n    _this4.elements = {};\n\n    _this4.prop({\n      system: draft.defaults.system,\n      units: draft.defaults.units\n    });\n    return _this4;\n  }\n\n  return Doc;\n})(draft.Container);\n\ndraft.doc = function doc(name) {\n  var newDoc = new draft.Doc(name);\n\n  (draft.docs || (draft.docs = [])).push(newDoc);\n  newDoc._id = draft.docs.length;\n\n  return newDoc;\n};\n\ndraft.Group = (function (_draft$Container2) {\n  _inherits(Group, _draft$Container2);\n\n  function Group() {\n    _classCallCheck(this, Group);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Group).apply(this, arguments));\n  }\n\n  return Group;\n})(draft.Container);\n\ndraft.Group.require(['system', 'units']);\n\n// TODO: mixin to draft.Group?\ndraft.Container.mixin({\n  group: function group(name) {\n    return this.push(new draft.Group(name)).prop({\n      system: this.prop('system'),\n      units: this.prop('units')\n    });\n  }\n});\n\ndraft.View = (function (_draft$Element2) {\n  _inherits(View, _draft$Element2);\n\n  function View() {\n    _classCallCheck(this, View);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(View).apply(this, arguments));\n  }\n\n  _createClass(View, [{\n    key: 'aspectRatio',\n\n    /* render(renderer) {\n      this['render' + renderer.toUpperCase()]();\n    } */\n\n    get: function get() {\n      var width = draft.types.length(this.prop('width')).value;\n      var height = draft.types.length(this.prop('height')).value;\n\n      var gcd = function gcd(a, b) {\n        return b ? gcd(b, a % b) : a;\n      };\n\n      gcd = gcd(width, height);\n      return width / gcd + ':' + height / gcd;\n    }\n  }]);\n\n  return View;\n})(draft.Element);\n\ndraft.View.require('size');\n\ndraft.Group.mixin({\n  // TODO: get group bounding box for default size\n\n  view: function view() {\n    var width = arguments.length <= 0 || arguments[0] === undefined ? 100 : arguments[0];\n    var height = arguments.length <= 1 || arguments[1] === undefined ? 100 : arguments[1];\n\n    return this.push(new draft.View()).size(width, height);\n  }\n});\n\ndraft.Point = (function (_draft$Element3) {\n  _inherits(Point, _draft$Element3);\n\n  function Point() {\n    _classCallCheck(this, Point);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Point).apply(this, arguments));\n  }\n\n  return Point;\n})(draft.Element);\n\ndraft.Point.require('stroke');\n\ndraft.Group.mixin({\n  point: function point() {\n    return this.push(new draft.Point());\n  }\n});\n\ndraft.Line = (function (_draft$Point) {\n  _inherits(Line, _draft$Point);\n\n  function Line() {\n    _classCallCheck(this, Line);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Line).apply(this, arguments));\n  }\n\n  _createClass(Line, [{\n    key: 'length',\n    value: function length(_length) {\n      return this.prop('length', draft.types.length(_length));\n    }\n  }]);\n\n  return Line;\n})(draft.Point);\n\ndraft.Group.mixin({\n  line: function line() {\n    var length = arguments.length <= 0 || arguments[0] === undefined ? 100 : arguments[0];\n\n    return this.push(new draft.Line()).length(length);\n  }\n});\n\ndraft.Shape = (function (_draft$Point2) {\n  _inherits(Shape, _draft$Point2);\n\n  function Shape() {\n    _classCallCheck(this, Shape);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Shape).apply(this, arguments));\n  }\n\n  return Shape;\n})(draft.Point);\n\ndraft.Shape.require(['fill', 'size']);\n\ndraft.Rect = (function (_draft$Shape) {\n  _inherits(Rect, _draft$Shape);\n\n  function Rect() {\n    _classCallCheck(this, Rect);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Rect).apply(this, arguments));\n  }\n\n  _createClass(Rect, [{\n    key: 'rekt',\n\n    // Hehehe\n    get: function get() {\n      return Math.floor(Math.random() * 101) + '% rekt';\n    }\n  }]);\n\n  return Rect;\n})(draft.Shape);\n\ndraft.Rect.require('radius');\n\ndraft.Group.mixin({\n  rect: function rect() {\n    var width = arguments.length <= 0 || arguments[0] === undefined ? 100 : arguments[0];\n    var height = arguments.length <= 1 || arguments[1] === undefined ? 100 : arguments[1];\n\n    return this.push(new draft.Rect()).size(width, height);\n  }\n});\n\ndraft.Circle = (function (_draft$Shape2) {\n  _inherits(Circle, _draft$Shape2);\n\n  function Circle() {\n    _classCallCheck(this, Circle);\n\n    return _possibleConstructorReturn(this, Object.getPrototypeOf(Circle).apply(this, arguments));\n  }\n\n  _createClass(Circle, [{\n    key: 'radius',\n    value: function radius(r) {\n      return this.prop('r', draft.types.length(r));\n    }\n  }]);\n\n  return Circle;\n})(draft.Shape);\n\ndraft.Group.mixin({\n  circle: function circle() {\n    var r = arguments.length <= 0 || arguments[0] === undefined ? 50 : arguments[0];\n\n    return this.push(new draft.Circle()).radius(r);\n  }\n});\nreturn draft;\n}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}