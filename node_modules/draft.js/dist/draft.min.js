/*draft.js v0.2.0 | http://draft.D1SC0te.ch | MIT license*/
!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.draft=e()}(this,function(){"use strict";function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(a){i=!0,o=a}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function a(t){return a.doc(t)};u.types={},u.mixins={},u.inherit=function(t,e,n){var r=t.prototype=Object.create(e.prototype);r.constructor=t,(n||"undefined"==typeof n)&&(t._super=e.prototype)},u.mixin=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.prototype[n]=e[n])},u.proxy=function(t){var e=arguments.length<=1||void 0===arguments[1]?!0:arguments[1],n=function u(t,e,n){if("string"==typeof e)return u(t,e.split("."),n);var i=e.shift();return e.length&&"object"===("undefined"==typeof t?"undefined":r(t))&&(n||i in t)?u(i in t?t[i]:t[i]={},e,n):[t,i]},i={has:function(t,e){var r=n(t,e),i=o(r,2),u=i[0],s=i[1];return!!u[s]},get:function(t,e){var r=n(t,e),i=o(r,2),u=i[0],s=i[1];return u[s]},set:function(t,r,i){var u=n(t,r,e),s=o(u,2),a=s[0],f=s[1];return a[f]=i,!0},deleteProperty:function(t,e){var r=n(t,e),i=o(r,2),u=i[0],s=i[1];return delete u[s]}};return"function"==typeof Proxy?new Proxy(t,i):t},u.defaults=u.proxy({get dpi(){var t=document.createElement("div");t.style.width="1in",t.style.padding=0,document.getElementsByTagName("body")[0].appendChild(t);var e=t.offsetWidth;return document.getElementsByTagName("body")[0].removeChild(t),e||96}}),u.types.Float=function(){function t(e){n(this,t),this.value=parseFloat(e)}return i(t,[{key:"valueOf",value:function(){return this.value}},{key:"type",get:function(){return"float"}},{key:"regex",get:function(){return"[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?"}}]),t}(),u.types["float"]=function(t){return void 0==t?t:new u.types.Float(t)};var s=function(t,e){return e=new RegExp(e+"$","i"),t=e.exec(t),t?t[0].toLowerCase():!1};return u.types.Length=function(r){function o(e,r){n(this,o);var i=t(this,Object.getPrototypeOf(o).call(this,e));return e=s(e,i.regex),r=s(r,i.regex),isNaN(i.value)||!e&&!r?i.unit="":(i.unit=e||r,i.convert(r)),i}return e(o,r),i(o,[{key:"convert",value:function(t){var e=this;if(t=s(t,this.regex),!t)return!1;for(var n=function(t,n){var r=e.units[t];return e.value*=n?r[1]:r[0],e.value/=n?r[0]:r[1],r[2]},r=this.unit;r!==t&&"px"!==r;)r=n(r);if(r!==t)for(r=t;"px"!==r;)r=n(r,!0);return this.unit=t,this.toString()}},{key:"valueOf",value:function(){return new o(this.toString(),u.defaults.units).value}},{key:"toString",value:function(){return this.value+this.unit}},{key:"type",get:function(){return"length"}},{key:"regex",get:function(){return"(px|pt|pc|in|ft|yd|mi|mm|cm|dm|km|m)"}},{key:"units",get:function(){return{px:[1,1,"px"],pt:[1,72,"px"],pc:[12,1,"pt"],"in":[u.defaults.dpi,1,"px"],ft:[12,1,"in"],yd:[3,1,"ft"],mi:[1760,1,"yd"],mm:[1,25.4,"in"],cm:[10,1,"mm"],dm:[10,1,"cm"],m:[10,1,"dm"],km:[1e3,1,"m"]}}}]),o}(u.types.Float),u.types.length=function(t,e){return void 0==t?t:new u.types.Length(t,e)},u.types.Color=function(){function t(e){if(n(this,t),e=new RegExp("^(?:"+this.regex+")$","i").exec(isNaN(e)?e:e.toString(16)),null!==e){this.color=e[0].toLowerCase();for(var r=1;3>=r;r++)e[r]=parseInt(e[r]||parseInt(e[r+3]||e[r+6].repeat(2),16),10);this.red=e[1],this.green=e[2],this.blue=e[3]}}return i(t,[{key:"valueOf",value:function(){return this.red<<16|this.green<<8|this.blue}},{key:"toString",value:function(){return this.color}},{key:"type",get:function(){return"color"}},{key:"regex",get:function(){var t="([01]?[0-9][0-9]?|2[0-4][0-9]|25[0-5])",e="rgb\\("+t+", ?"+t+", ?"+t+"\\)",n="([0-9a-f]{2})".repeat(3),r="#?(?:"+n+"|"+n.replace(/\{2\}/g,"")+")";return e+"|"+r}}]),t}(),u.types.color=function(t){return void 0==t?t:new u.types.Color(t)},u.mixins.event={on:function(t,e){var n=this.getListeners(t,!0);for(var i in n){var o=n[i];-1===o.map(function(t){return t.listener}).indexOf(e)&&o.push("object"===("undefined"==typeof e?"undefined":r(e))?e:{listener:e,once:!1})}return this},once:function(t,e){return this.on(t,{listener:e,once:!0})},off:function(t,e){var n=this.getListeners(t,!0);for(var r in n){var i=n[r],o=i.map(function(t){return t.listener}).lastIndexOf(e);-1!==o&&i.splice(o,1)}return this},fire:function(t,e){Array.isArray(e)||(e=[e]);var n=this.getListeners(t,!0);for(var r in n)for(var i=n[r],o=i.length;o--;){var u=i[o],s=u.listener.apply({target:this,timeStamp:Date(),type:r},e);(u.once===!0||"off"===s)&&this.off(t,u.listener)}return this},defineEvent:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];var r=!0,i=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(r=(u=s.next()).done);r=!0){var a=u.value;this.getListeners(a)}}catch(f){i=!0,o=f}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw o}}return this},removeEvent:function(t){var e=this._getEvents();if("string"==typeof t)delete e[t];else if(t instanceof RegExp)for(var n in e)t.test(n)&&delete e[n];else delete this._events;return this},getListeners:function(t,e){var n=this._getEvents(),r={};if(t instanceof RegExp)for(var i in n)t.test(i)&&(r[i]=n[i]);else{var o=n[t]||(n[t]=[]);void 0===e?r=o:r[t]=o}return r},_getEvents:function(){return this._events||(this._events={})}},u.mixins.system={system:function(t){return this.prop("system",t)}},u.defaults.system="cartesian",u.mixins.units={units:function(t){return this.prop("units",t)}},u.defaults.units="px",u.mixins.position={position:function(t,e,n){return this.prop({x:u.types.length(t),y:u.types.length(e),z:u.types.length(n)})},pos:function(){return this.position.apply(this,arguments)},translate:function(t,e,n){return t=this.prop("x")+t||0,e=this.prop("y")+e||0,n=this.prop("z")+n||0,this.position(t,e,n)}},u.mixins.rotation={rotation:function(t,e,n){return this.prop({"α":t,"β":e,"γ":n})},rot:function(){return this.rotation.apply(this,arguments)},rotate:function(t,e,n){return t=this.prop("α")+t||0,e=this.prop("β")+e||0,n=this.prop("γ")+n||0,this.position(t,e,n)}},u.mixins.fill={fill:function(t){return this.fillColor(t)},fillColor:function(t){return this.prop("fill.color",u.types.color(t))},fillOpacity:function(t){return/^(0(\.\d*)?|1(\.0*)?)$/.test(t)&&(t=parseFloat(t,10)),this.prop("fill.opacity",t)}},u.defaults["fill.color"]="#fff",u.defaults["fill.opacity"]=1,u.mixins.stroke={stroke:function(t){return this.strokeColor(t)},strokeColor:function(t){return this.prop("stroke.color",u.types.color(t))},strokeOpacity:function(t){return/^(0(\.\d*)?|1(\.0*)?)$/.test(t)&&(t=parseFloat(t,10)),this.prop("stroke.opacity",t)},strokeWidth:function(t){return this.prop("stroke.width",u.types.length(t))}},u.defaults["stroke.color"]="#000",u.defaults["stroke.opacity"]=1,u.defaults["stroke.width"]=1,u.mixins.size={size:function(t,e){return this.prop({width:u.types.length(t),height:u.types.length(e)})},scale:function(t,e){return this.prop({width:this.prop("width")*t||void 0,height:this.prop("height")*e||void 0})}},u.mixins.radius={rx:function(t){return this.prop("rx",u.types.length(t))},ry:function(t){return this.prop("ry",u.types.length(t))},radius:function(t,e){return this.prop({rx:u.types.length(t),ry:u.types.length(e)})}},u.Element=function(){function t(e){n(this,t),this._properties={},e&&this.prop("name",e);for(var r in u)if(this.constructor===u[r]){this._type=r.toLowerCase();break}}return i(t,[{key:"prop",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?this._properties:arguments[2];if(void 0===t)return Object(this._properties);if(null===t)this._properties={};else if("string"==typeof t){var i=u.proxy(this._properties);if(void 0===e)return t in i?i[t]:null;if(null===e)delete i[t];else{if("object"===("undefined"==typeof e?"undefined":r(e))){var o=void 0;switch(e.type){case"length":o=this.parent.prop("units")||u.defaults.units,e.unit=e.unit||o,e.convert(o);case"color":e=String(e)}}i[t]=e}this.fire("change",[t,e])}else if("object"===("undefined"==typeof t?"undefined":r(t))){var s=!1;for(var a in t)t[a]=this.prop(a,t[a],n),s=s||"object"==r(t[a]);return s?this:t}return this}},{key:"stringify",value:function(t){var e;return Array.isArray(t)?e=function(e,n){return-1===t.indexOf(e)?n:void 0}:t instanceof RegExp&&(e=function(e,n){return t.test(e)?void 0:n}),JSON.stringify(this,e,2)}},{key:"toJSON",value:function(){return{type:this.type,id:this.id,properties:this.prop(),children:this.children}}},{key:"type",get:function(){return this._type}},{key:"id",get:function(){return this._id}},{key:"name",get:function(){return this.prop("name")}},{key:"domID",get:function(){for(var t=String(this.id);t.length<4;)t="0"+t;return this.type+"_"+t}}],[{key:"inherit",value:function(t,e){u.inherit(this,t,e)}},{key:"mixin",value:function(t){u.mixin(this,t)}},{key:"require",value:function(t){if("string"==typeof t)this.mixin(u.mixins[t]);else if(Array.isArray(t)){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var s=i.value;this.require(s)}}catch(a){n=!0,r=a}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}}}]),t}(),u.Element.require(["event","position","rotation"]),u.Container=function(r){function o(e){n(this,o);var r=t(this,Object.getPrototypeOf(o).call(this,e));return r.children=[],r}return e(o,r),i(o,[{key:"add",value:function(t){t.parent=this,t.doc=this.doc||this;var e=t.type;return(t.doc.elements[e]||(t.doc.elements[e]=[])).push(t),t._id=t.doc.elements[e].length,this.children.push(t),this.fire("add",[t]),this}},{key:"push",value:function(t){return this.add(t),t}},{key:"remove",value:function(t){return this.fire("remove",[t]),this}},{key:"firstChild",get:function(){return this.children[0]}},{key:"lastChild",get:function(){return this.children[this.children.length-1]}}]),o}(u.Element),u.Doc=function(r){function i(e){n(this,i);var r=t(this,Object.getPrototypeOf(i).call(this,e));return r.elements={},r.prop({system:u.defaults.system,units:u.defaults.units}),r}return e(i,r),i}(u.Container),u.doc=function(t){var e=new u.Doc(t);return(u.docs||(u.docs=[])).push(e),e._id=u.docs.length,e},u.Group=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),i}(u.Container),u.Group.require(["system","units"]),u.Container.mixin({group:function(t){return this.push(new u.Group(t)).prop({system:this.prop("system"),units:this.prop("units")})}}),u.View=function(r){function o(){return n(this,o),t(this,Object.getPrototypeOf(o).apply(this,arguments))}return e(o,r),i(o,[{key:"aspectRatio",get:function(){var t=u.types.length(this.prop("width")).value,e=u.types.length(this.prop("height")).value,n=function r(t,e){return e?r(e,t%e):t};return n=n(t,e),t/n+":"+e/n}}]),o}(u.Element),u.View.require("size"),u.Group.mixin({view:function(){var t=arguments.length<=0||void 0===arguments[0]?100:arguments[0],e=arguments.length<=1||void 0===arguments[1]?100:arguments[1];return this.push(new u.View).size(t,e)}}),u.Point=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),i}(u.Element),u.Point.require("stroke"),u.Group.mixin({point:function(){return this.push(new u.Point)}}),u.Line=function(r){function o(){return n(this,o),t(this,Object.getPrototypeOf(o).apply(this,arguments))}return e(o,r),i(o,[{key:"length",value:function(t){return this.prop("length",u.types.length(t))}}]),o}(u.Point),u.Group.mixin({line:function(){var t=arguments.length<=0||void 0===arguments[0]?100:arguments[0];return this.push(new u.Line).length(t)}}),u.Shape=function(r){function i(){return n(this,i),t(this,Object.getPrototypeOf(i).apply(this,arguments))}return e(i,r),i}(u.Point),u.Shape.require(["fill","size"]),u.Rect=function(r){function o(){return n(this,o),t(this,Object.getPrototypeOf(o).apply(this,arguments))}return e(o,r),i(o,[{key:"rekt",get:function(){return Math.floor(101*Math.random())+"% rekt"}}]),o}(u.Shape),u.Rect.require("radius"),u.Group.mixin({rect:function(){var t=arguments.length<=0||void 0===arguments[0]?100:arguments[0],e=arguments.length<=1||void 0===arguments[1]?100:arguments[1];return this.push(new u.Rect).size(t,e)}}),u.Circle=function(r){function o(){return n(this,o),t(this,Object.getPrototypeOf(o).apply(this,arguments))}return e(o,r),i(o,[{key:"radius",value:function(t){return this.prop("r",u.types.length(t))}}]),o}(u.Shape),u.Group.mixin({circle:function(){var t=arguments.length<=0||void 0===arguments[0]?50:arguments[0];return this.push(new u.Circle).radius(t)}}),u});
//# sourceMappingURL=draft.min.js.map
